{
  "Version": "2019-10-30",
  "StartAction": "action-enable-logging",
  "Metadata": {
    "EntryPointPosition": { "x": 20, "y": 100 },
    "ActionMetadata": {
      "action-enable-logging": { "Position": { "x": 50, "y": 100 } },
      "action-set-language": { "Position": { "x": 200, "y": 100 } },
      "action-set-voice": { "Position": { "x": 350, "y": 100 } },
      "action-lex-bot": { "Position": { "x": 500, "y": 100 } },
      "action-post-lex": { "Position": { "x": 700, "y": 100 } },
      "action-error-message": { "Position": { "x": 700, "y": 300 } },
      "action-disconnect": { "Position": { "x": 900, "y": 200 } }
    }
  },
  "Actions": [
    {
      "Identifier": "action-enable-logging",
      "Type": "UpdateFlowLoggingBehavior",
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Transitions": {
        "NextAction": "action-set-language"
      }
    },
    {
      "Identifier": "action-set-language",
      "Type": "UpdateContactData",
      "Parameters": {
        "LanguageCode": "en-AU",
        "TargetContact": "Current"
      },
      "Transitions": {
        "NextAction": "action-set-voice",
        "Errors": [
          {
            "NextAction": "action-set-voice",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "action-set-voice",
      "Type": "UpdateContactTextToSpeechVoice",
      "Parameters": {
        "TextToSpeechVoice": "Olivia",
        "TextToSpeechEngine": "Neural"
      },
      "Transitions": {
        "NextAction": "action-lex-bot",
        "Errors": [
          {
            "NextAction": "action-lex-bot",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "action-lex-bot",
      "Type": "ConnectParticipantWithLexBot",
      "Parameters": {
        "Text": "Hello, thank you for calling. This is Pol's assistant. Sorry, he is currently not available. How can i help you today?",
        "LexV2Bot": {
          "AliasArn": "${LEX_BOT_ALIAS_ARN}"
        },
        "LexSessionAttributes": {},
        "LexTimeoutSeconds": {
          "Text": "60"
        }
      },
      "Transitions": {
        "NextAction": "action-post-lex",
        "Errors": [
          {
            "NextAction": "action-post-lex",
            "ErrorType": "InputTimeLimitExceeded"
          },
          {
            "NextAction": "action-error-message",
            "ErrorType": "NoMatchingError"
          },
          {
            "NextAction": "action-error-message",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "action-post-lex",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "Goodbye."
      },
      "Transitions": {
        "NextAction": "action-disconnect",
        "Errors": [
          {
            "NextAction": "action-disconnect",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "action-error-message",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "Sorry, we could not process your call. Goodbye."
      },
      "Transitions": {
        "NextAction": "action-disconnect",
        "Errors": [
          {
            "NextAction": "action-disconnect",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "action-disconnect",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    }
  ]
}
